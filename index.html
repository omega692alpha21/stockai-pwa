<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <title>StocksAI</title>
  <meta name="description" content="StocksAI — Buffett-style valuations and value picks with an Apple-grade UI." />
  <meta name="theme-color" content="#0A0E13" />

  <!-- iOS PWA -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-title" content="StocksAI" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=8" />

  <!-- Icons / Manifest -->
  <link rel="icon" type="image/png" sizes="512x512" href="/icon-512x512.png?v=8" />
  <link rel="manifest" href="/manifest.json" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0A0E13; --panel:#0E131A; --glass:#0E131Aee;
      --txt:#E7ECEE; --muted:#9DA8AE; --stroke:#1E262D; --accent:#00E091; --accent-2:#C9A858;
    }
    *{ box-sizing:border-box; max-width:100vw !important; }
    html,body{
      margin:0; padding:0; width:100vw; height:100%;
      background:var(--bg); color:var(--txt);
      overflow-x:hidden; -webkit-text-size-adjust:100%;
      font-family:-apple-system, BlinkMacSystemFont, "SF Pro Text", Inter, system-ui, Segoe UI, Roboto, Arial, sans-serif;
    }
    #app{ min-height:100%; display:flex; flex-direction:column; }

    header{
      position:sticky; top:0; z-index:10;
      display:flex; align-items:center; justify-content:center;
      padding:12px 14px;
      background:linear-gradient(180deg, #0A0E13 0%, rgba(10,14,19,.75) 100%);
      border-bottom:1px solid var(--stroke);
      backdrop-filter:saturate(140%) blur(6px);
    }
    header h1{ margin:0; font-size:16px; font-weight:800; letter-spacing:.2px; }
    main{ flex:1; display:flex; }
    iframe#frame{
      flex:1; width:100% !important; max-width:100% !important;
      height:calc(100vh - 56px); border:0; opacity:0; transition:opacity .25s ease;
      background:var(--bg);
    }

    /* Splash / loading */
    #loading{
      position:fixed; inset:0; z-index:9; display:grid; place-items:center;
      background:
        radial-gradient(1200px 1200px at 50% -200px, rgba(0,224,145,.12), transparent 60%),
        linear-gradient(180deg, #0A0E13 0%, #0A0E13 60%);
    }
    .card{
      width:min(92vw, 520px); padding:22px; border-radius:18px;
      border:1px solid var(--stroke); background:var(--glass);
      box-shadow:0 10px 40px rgba(0,0,0,.35);
      text-align:center;
    }
    .logo{
      width:60px; height:60px; border-radius:14px;
      background:conic-gradient(from 120deg, #00E091, #14D9BA, #00E091);
      display:grid; place-items:center; margin:0 auto 10px;
      color:#00150D; font-weight:900; font-size:28px;
      box-shadow:0 6px 22px rgba(0,224,145,.25);
    }
    .muted{ color:var(--muted); font-size:13px; }
    .spinner{
      width:44px; height:44px; border-radius:50%;
      border:4px solid #1E262D; border-top-color:var(--accent);
      animation:spin 1s linear infinite; margin:12px auto 4px;
    }
    @keyframes spin{ to{ transform:rotate(360deg); } }
  </style>
</head>
<body>
  <div id="app">
    <header><h1>StocksAI</h1></header>

    <!-- Embed the Hugging Face Space -->
    <main><iframe id="frame" title="StocksAI App" allow="clipboard-read; clipboard-write"></iframe></main>

    <!-- Splash -->
    <div id="loading" role="status" aria-live="polite">
      <div class="card">
        <div class="logo">S</div>
        <div class="spinner"></div>
        <div class="muted">Launching Buffett-grade insights…</div>
      </div>
    </div>
  </div>

  <script>
    // Point this at your live Space:
    const SPACE_URL = "https://mkultrasm-stocksai.hf.space/";
    const frame = document.getElementById('frame');
    const loading = document.getElementById('loading');

    // Prefer portrait (gracefully ignored where unsupported)
    if (screen.orientation && screen.orientation.lock) {
      screen.orientation.lock('portrait').catch(()=>{});
    }

    function boot(){ frame.src = SPACE_URL; }
    frame.addEventListener('load', ()=>{ loading.style.display='none'; frame.style.opacity=1; });

    // Kill accidental horizontal pan
    let sx=null;
    document.addEventListener('touchstart',e=>{ sx=e.touches[0].clientX; },{passive:true});
    document.addEventListener('touchmove',e=>{
      if(sx!==null && Math.abs(e.touches[0].clientX - sx) > 8) e.preventDefault();
    },{passive:false});

    boot();
  </script>
</body>
</html>
